<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">

<title>
  
    Widget Documentation
  
</title>

<!-- Bootstrap core CSS -->
<link href="./assets/css/bootstrap.css" rel="stylesheet">


<!-- Documentation extras -->
<link href="./assets/css/docs.css" rel="stylesheet">
<link href="./assets/css/pygments-manni.css" rel="stylesheet">
<link rel="stylesheet" href="./assets/highlight.js/styles/github.css">

<style type="text/css">
pre .comment { font-style: normal;}
h1, h2, h3, .lead
{
  font-family: "Helvetica Neue", Helvetica, Arial, "Microsoft Yahei UI", "Microsoft YaHei", SimHei, "\5B8B\4F53", simsun, sans-serif;
  font-weight: normal;
}
h4 {
  font-weight: bold;
}

</style>

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond/respond.min.js"></script>
<![endif]-->

    <!-- Place anything custom after this. -->
  </head>
  <body class="bs-docs-docs" data-spy="scroll" data-target=".bs-docs-sidebar">

    <!-- Docs nav -->
    <div class="bs-docs-sidebar">
  <ul class="nav bs-docs-sidenav">
    <h3 class="bs-docs-sidenav-heading"><a href="/">Widget</a></h3>
    
    <li><a href="#welcome">欢迎</a></li>
    <li><a href="#getting-started">入门</a></li>
    <li><a href="#download">下载</a></li>
    <li><a href="#news">随时关注最新消息</a></li>

    <li>
      <a class="nav-header" href="#widget">微件列表</a>
    </li>
    <li>
      <a href="#cache">缓存</a>
      <ul class="nav">
        <li><a href="#cache">通用缓存</a></li>
        <li><a href="#apc">APC</a></li>
        <li><a href="#dbCache">数据库缓存</a></li>
        <li><a href="#fileCache">文件缓存</a></li>
        <li><a href="#memcache">Memcache</a></li>
        <li><a href="#memcached">Memcached</a></li>
        <li><a href="#redis">Redis</a></li>
        <li><a href="#bicache">二级缓存</a></li>
      </ul>
    </li>
    <li>
      <a href="#event">事件</a>
      <ul class="nav">
        <li><a href="#eventManager">EventManager</a> </li>
        <li><a href="#off">off</a></li>
        <li><a href="#on">on</a></li>
        <li><a href="#trigger">trigger</a></li>
      </ul>
    </li>
    <li>
      <a href="#http-request">HTTP请求</a>
      <ul class="nav">
        <li><a href="#browser">Browser</a></li>
        <li><a href="#cookie">Cookie</a></li>
        <li><a href="#inAjax">InAjax</a></li>
        <li><a href="#post">Post</a></li>
        <li><a href="#query">Query</a></li>
        <li><a href="#request">Request</a></li>
        <li><a href="#server">Server</a></li>
        <li><a href="#session">Session</a></li>
      </ul>
    </li>
    <li>
      <a href="#http-response">HTTP响应</a>
      <ul class="nav">
        <li><a href="#download-widget">Download</a></li>
        <li><a href="#flush">Flush</a></li>
        <li><a href="#header">Header</a></li>
        <li><a href="#json">Json</a></li>
        <li><a href="#response">Response</a></li>
        <li><a href="#redirect">Redirect</a></li>
      </ul>
    </li>
    <li>
      <a href="#validation">验证器</a>
      <ul class="nav">
        <li><a href="#validate">Validation</a></li>
        <li>数据类型及组成
          <ul>
            <li><a href="#isAlnum">isAlnum</a> - 检查数据是否只由字母(a-z)和数字(0-9)组成</li>
            <li><a href="#isAlpha">isAlpha</a> - 检查数据是否只由字母(a-z)组成</li>
            <li><a href="#isBlank">isBlank</a> - 检查数据是否为空(不允许空格)</li>
            <li><a href="#isDecimal">isDecimal</a> - 检查数据是否为小数</li>
            <li><a href="#isDigit">isDigit</a> - 检查数据是否只由数字组成</li>
            <li><a href="#isDoubleByte">isDoubleByte</a> - 检查数据是否只由双字节字符组成</li>
            <li><a href="#isEmpty">isEmpty</a> - 检查数据是否为空(允许空格)</li>
            <li><a href="#isEndsWith">isEndsWith</a> - 检查数据是否以指定字符串结尾</li>
            <li><a href="#isEquals">isEquals</a> - 检查数据是否与指定数据相等</li>
            <li><a href="#isIn">isIn</a> - 检查数据是否在指定的数组中</li>
            <li><a href="#isLowercase">isLowercase</a> - 检查数据是否为小写</li>
            <li><a href="#isNull">isNull</a> - 检查数据是否为null</li>
            <li><a href="#isNumber">isNumber</a> - 检查数据是否为有效数字</li>
            <li><a href="#isRegex">isRegex</a> - 检查数据是否匹配指定的正则表达式</li>
            <li><a href="#isRequired">isRequired</a> - 检查数据是否为空(用于组合验证,如果允许为空且数据为空,则不对数据进行剩余规则的校验)</li>
            <li><a href="#isStartsWith">isStartsWith</a> - 检查数据是否以指定字符串开头</li>
            <li><a href="#isType">isType</a> - 检查数据是否为指定的类型</li>
            <li><a href="#isUppercase">isUppercase</a> - 检查数据是否为大写</li>
          </ul>
        </li>
<li>长度大小

<ul>
<li><a href="#isLength">isLength</a> - 检查数据是否为指定的长度,或在指定的长度范围内</li>
<li><a href="#isMax">isMax</a> - 检查数据是否小于等于指定的值</li>
<li><a href="#isMaxlength">isMaxLength</a> - 检查数据是否小于等于指定长度</li>
<li><a href="#isMin">isMin</a> - 检查数据是否大于等于指定的值</li>
<li><a href="#isMinlength">isMinLength</a> - 检查数据是否大于等于指定长度</li>
<li><a href="#isRange">isRange</a> - 检查数据是否在指定的两个值之间</li>
</ul></li>
<li>日期和时间

<ul>
<li><a href="#isDate">isDate</a> - 检查数据是否为合法的日期</li>
<li><a href="#isDatetime">isDateTime</a> - 检查数据是否为合法的日期时间</li>
<li><a href="#isTime">isTime</a> - 检查数据是否为合法的时间</li>
</ul></li>
<li>文件目录

<ul>
<li><a href="#isDir">isDir</a>－ 检查数据是否为存在的目录</li>
<li><a href="#isExists">isExists</a> - 检查数据是否为存在的文件或目录</li>
<li><a href="#isFile">isFile</a> - 检查数据是否为合法的文件</li>
<li><a href="#isImage">isImage</a> - 检查数据是否为合法的图片</li>
</ul></li>
<li>网络

<ul>
<li><a href="#isEmail">isEmail</a> - 检查数据是否为有效的邮箱地址</li>
<li><a href="#isIp">isIp</a> - 检查数据是否为有效的IP地址</li>
<li><a href="#isTld">isTld</a> - 检查数据是否为存在的顶级域名</li>
<li><a href="#isUrl">isUrl</a> - 检查数据是否为有效的URL地址</li>
<li><a href="#isUuid">isUuid</a> - 检查数据是否为有效的UUID</li>
</ul></li>
<li>区域:所有

<ul>
<li><a href="#isCreditcard">isCreditCard</a> - 检查数据是否为合法的信用卡号码</li>
</ul></li>
<li>区域:中国

<ul>
<li><a href="#isChinese">isChinese</a> - 检查数据是否只由中文组成</li>
<li><a href="#isIdCardCn">isIdCardCn</a> - 检查数据是否为有效的中国身份证</li>
<li><a href="#isIdCardHk">isIdCardHk</a> - 检查数据是否为有效的香港身份证</li>
<li><a href="#isIdCardMo">isIdCardMo</a> - 检查数据是否为有效的澳门身份证</li>
<li><a href="#isIdCardTw">isIdCardTw</a> - 检查数据是否为有效的台湾身份证</li>
<li><a href="#isPhoneCn">isPhoneCn</a> - 检查数据是否为有效的电话号码</li>
<li><a href="#isPostcode">isPostcode</a> - 检查数据是否为有效的邮政编码</li>
<li><a href="#isQQ">isQQ</a> - 检查数据是否为有效的QQ号码</li>
<li><a href="#isMobileCn">isMobileCn</a> - 检查数据是否为有效的手机号码</li>
</ul></li>
<li>分组

<ul>
<li><a href="#isAllof">isAllOf</a> - 检查数据是否通过所有的规则校验</li>
<li><a href="#isNoneof">isNoneOf</a> - 检查数据是否不符合所有指定的规则</li>
<li><a href="#isOneof">isOneOf</a> - 检查数据是否满足指定规则中的任何一条</li>
<li><a href="#isSomeof">isSomeOf</a> - 检查数据是否通过指定数量规则的验证</li>
</ul></li>
<li>第三方集成

<ul>
<li><a href="#isEntityExists">isEntityExists</a> - 检查Doctrine ORM实体是否存在</li>
<li><a href="#isRecordExists">isRecordExists</a> - 检查数据表是否存在指定的记录</li>
</ul></li>
<li>其他

<ul>
<li><a href="#isAll">isAll</a> - 检查集合里的每一项是否符合指定的规则</li>
<li><a href="#isCallback">isCallback</a> - 检查数据是否通过指定回调方法验证</li>
<li><a href="#isDivisibleby">isDivisibleBy</a> - 检查数据是否能被指定的除数整除</li>
</ul></li>
</ul></li>
    <li>
      <a href="#view">视图</a>
      <ul class="nav">
        <li><a href="#view">view</a></li>
        <li><a href="#escape">escape</a></li>
        <li><a href="#smarty">smarty</a></li>
        <li><a href="#twig">twig</a></li>
      </ul>
    </li>
    <li>
      <a href="#util">工具</a>
      <ul class="nav">
        <li><a href="#attr">attr</a> - 获取数组或对象中指定键名的值</li>
        <li><a href="#instance">instance</a> - 初始化指定的类</li>
        <li><a href="#logger">logger</a> - 记录日志</li>
        <li><a href="#marker">marker</a> - 设置一个标记,包括时间,内存使用量等信息</li>
        <li><a href="#pinyin">pinyin</a> - 将中文转换为拼音字母</li>
      </ul>
    </li>
    <li>
      <a href="#vendor">第三方集成</a>
      <ul class="nav">
        <li><a href="#db">db</a> - 获取<a href="https://github.com/doctrine/dbal">Doctrine DBAL</a>的Connection对象</li>
        <li><a href="#entityManager">entityManager</a> - 获取<a href="https://github.com/doctrine/doctrine2">Doctrine ORM</a>的EntityManager对象</li>
        <li><a href="#monolog">monolog</a> - 获取<a href="https://github.com/Seldaek/monolog">Monolog</a>对象或记录一条日志</li>
        <li><a href="#phpError">phpError</a> - 启用<a href="http://phperror.net/">PHPError</a>的错误视图</li>
      </ul>
    </li>
  </ul>
</div>

<!-- Page content of course! -->
    <div class="bs-docs-container"> 

<!-- Welcome
  ================================================== -->
  <div id="welcome" class="bs-docs-section-header">
    <h1>欢迎</h1>
    <p class="lead">欢迎来到PHP微框架Widget的文档.这里将为您展示丰富全面的Widget代码指导和案例.</p>
  </div>

<!-- Getting started
  ================================================== -->
  <div class="bs-docs-section" id="getting-started">
    <div class="page-header">
      <h1>入门</h1>
    </div>
    <p class="lead">Widget是一个非常小的PHP框架,她提供了一种高效简洁的方式让您更方便地使用PHP.<p>
    <p>Widget的使用比任何框架都要简单,只需3步,<code>加载</code>=><code>创建</code>=><code>调用</code>!</p>
    <pre class="php"><code>// 加载核心类文件
require 'path/to/widget/lib/Widget/Widget.php';

// 创建微件管理器对象
$widget = \Widget\Widget::create();

// 调用query微件,获取URL请求中id参数
$id = $widget->query('id');</code></pre>
  </div>

<!-- Download
  ================================================== -->
  <div class="bs-docs-section" id="download">
    <div class="page-header">
      <h1>下载</h1>
    </div>
    <div class="row">
      <div class="col-span-6">
        <h3>1. 通过<a href="http://getcomposer.org/" target="_blank">Composer</a>下载</h3>
        <p><pre class="json"><code>{
    "require": {
        "widget/widget": "0.9.2-beta"
    }
}</code></pre></p>
      </div>
      <div class="col-span-6">
        <h3>2. 直接下载</h3>
        <p><a class="btn btn-large btn-primary btn-block" href="https://github.com/twinh/widget/archive/v0.9.2-beta.zip">最新版 v0.9.2-beta</a></p>
        <p><a class="btn btn-large btn-block" href="https://github.com/twinh/widget/archive/master.zip">开发版</a></p>
      </div>
    </div>
  </div>

<!-- News
  ================================================== -->
  <div class="bs-docs-section" id="news">
    <div class="page-header">
      <h1>随时关注最新消息</h1>
    </div>
    <p class="lead">Widget每天都有新的提交,欢迎关注,了解最新趋势!</p>
    <p>
      <iframe src="http://ghbtns.com/github-btn.html?user=twinh&repo=widget&type=watch"
        allowtransparency="true" frameborder="0" scrolling="0" width="53" height="20"></iframe>
      <iframe src="http://ghbtns.com/github-btn.html?user=twinh&type=follow"
        allowtransparency="true" frameborder="0" scrolling="0" width="132" height="20"></iframe>
    </p>
  </div>

  <!-- Widget
  ================================================== -->
  <div id="widget" class="bs-docs-section-header">
    <h1>微件列表</h1>
    <p class="lead">提供了上百个个各具特色的微件,包括缓存,事件,HTTP请求,HTTP响应,验证器等</p>
  </div>

<!-- cache
  ================================================== -->
  <section id="cache">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1>Cache</h1>

<p>设置或获取指定缓存类型的一项缓存</p>

<p>使用<code>cache</code>微件会让你的代码更加灵活自由,你可以不用关注缓存的类型,并且可以根据需求或代码运行环境快速切换缓存类型,同时不用过多改动已有的代码</p>

<h2>案例</h2>

<h3>设置和获取缓存</h3>

<pre><code class="php">// 设置缓存
$widget-&gt;cache('key', 'value');
// 返回 true

// 获取缓存
$widget-&gt;cache('key');
// 返回 value
</code></pre>

<h3>设置60秒后就过期的缓存</h3>

<pre><code class="php">$widget-&gt;cache('key', 'value', 60);
</code></pre>

<h2>调用方式</h2>

<h3>选项</h3>

<table class="table table-bordered table-striped">
<thead><tr>
<th>名称</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>driver</td>
<td>string</td>
<td>apc</td>
<td>缓存的类型</td>
</tr></tbody>
</table>
<p>目前支持的缓存类型有<br>
* <code>apc</code> <em>推荐</em><br>
* <code>arrayCache</code><br>
* <code>dbCache</code><br>
    * sqlite<br>
    * mysql<br>
    * pgsql<br>
    * sqlsrv/dblib <em>不稳定</em><br>
    * oci <em>不稳定</em><br>
* <code>fileCache</code><br>
* <code>memcache</code><br>
* <code>memcached</code><br>
* <code>redis</code> <em>推荐</em></p>

<h3>方法</h3>

<h4>cache( $key, $value [ $expire ] )</h4>

<p>设置缓存的值</p>

<h5>参数</h5>

<ul>
<li>
<strong>$key</strong> <code>string</code> 缓存的键名</li>
<li>
<strong>$value</strong> <code>mixed</code> 缓存的值,允许任意类型</li>
<li>
<strong>$expire</strong> <code>int</code> 缓存的有效期,默认为0秒,表示永不过期</li>
</ul>
<h4>cache( $key )</h4>

<p>获取指定名称的缓存</p>

<h3>cache-&gt;set($key, $value)</h3>

<p>设置缓存的值</p>

<h3>cache-&gt;get($key)</h3>

<p>获取缓存的值</p>

<h3>cache-&gt;remove($key)</h3>

<p>移除一项缓存</p>

<h3>cache-&gt;exists($key)</h3>

<p>检查缓存是否存在</p>

<h3>cache-&gt;add($key, $value)</h3>

<p>增加一项缓存,如果缓存已存在,返回false</p>

<h3>cache-&gt;replace($key, $value)</h3>

<p>替换一项缓存,如果缓存 <strong>不</strong> 存在,返回false</p>

<h3>cache-&gt;increment($key, $offset = 1)</h3>

<p>增大一项缓存的值</p>

<h3>cache-&gt;decrement($key, $offset = 1)</h3>

<p>减小一项缓存的值</p>

<h3>cache-&gt;getMulti($keys)</h3>

<p>批量获取缓存的值</p>

<h3>cache-&gt;setMulti($values)</h3>

<p>批量设置缓存的值</p>
</body></html>

  </section>

<!-- apc
  ================================================== -->
  <section id="apc">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1>Apc</h1>

<p>通过面向对象的方式设置或获取PHP APC缓存,并提供更多友好方便的功能方法.</p>

<h2>案例</h2>

<h3>设置和获取缓存</h3>

<pre><code class="php">// 设置缓存
$widget-&gt;apc('key', 'value');
// true

// 获取缓存
$widget-&gt;apc('key');
// value
</code></pre>

<h3>设置60秒后就过期的缓存</h3>

<pre><code class="php">$widget-&gt;apc('key', 'value', 60);
</code></pre>

<h2>调用方式</h2>

<h3>选项</h3>

<p><em>无</em></p>

<h3>方法</h3>

<h4>apc ($key, $value)</h4>

<p>设置缓存的值<br><code>php<br>
$widget-&gt;apc('key', 'value');<br></code></p>

<h4>apc($key)</h4>

<p>获取指定名称的缓存<br><code>php<br>
$widget-&gt;apc('name');<br></code></p>

<h3>apc-&gt;set($key, $value)</h3>

<p>设置缓存的值</p>

<h3>apc-&gt;get($key)</h3>

<p>获取缓存的值</p>

<h3>apc-&gt;remove($key)</h3>

<p>移除一项缓存</p>

<h3>apc-&gt;exists($key)</h3>

<p>检查缓存是否存在</p>

<h3>apc-&gt;add($key, $value)</h3>

<p>增加一项缓存,如果缓存已存在,返回false</p>

<h3>apc-&gt;replace($key, $value)</h3>

<p>替换一项缓存,如果缓存 <strong>不</strong> 存在,返回false</p>

<h3>apc-&gt;increment($key, $offset = 1)</h3>

<p>增大一项缓存的值</p>

<h3>apc-&gt;decrement($key, $offset = 1)</h3>

<p>减小一项缓存的值</p>

<h3>apc-&gt;getMulti($keys)</h3>

<p>批量获取缓存的值</p>

<h3>apc-&gt;setMulti($values)</h3>

<p>批量设置缓存的值</p>
</body></html>

  </section>

<!-- dbCache
  ================================================== -->
  <section id="dbCache">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1>DbCache</h1>

<p>设置或获取一项缓存,缓存数据存储于数据库中</p>

<p>目前支持<code>sqlite</code>,<code>mysql</code>,<code>pgsql</code>,<code>sqlsrv</code>/<code>dblib</code>(不稳定),<code>oci</code>(不稳定)</p>

<h2>案例</h2>

<h3>设置和获取缓存</h3>

<pre><code class="php">// 设置缓存
$widget-&gt;dbCache('key', 'value');
// 返回 true

// 获取缓存
$widget-&gt;dbCache('key');
// 返回 value
</code></pre>

<h3>设置60秒后就过期的缓存</h3>

<pre><code class="php">$widget-&gt;dbCache('key', 'value', 60);
</code></pre>

<h2>调用方式</h2>

<h3>选项</h3>

<p><em>无</em></p>

<h3>方法</h3>

<h4>dbCache( $key, $value [ $expire ] )</h4>

<p>设置缓存的值</p>

<h5>参数</h5>

<ul>
<li>
<strong>$key</strong> <code>string</code> 缓存的键名</li>
<li>
<strong>$value</strong> <code>mixed</code> 缓存的值,允许任意类型</li>
<li>
<strong>$expire</strong> <code>int</code> 缓存的有效期,默认为0秒,表示永不过期</li>
</ul>
<h4>dbCache( $key )</h4>

<p>获取指定名称的缓存</p>

<h3>dbCache-&gt;set($key, $value)</h3>

<p>设置缓存的值</p>

<h3>dbCache-&gt;get($key)</h3>

<p>获取缓存的值</p>

<h3>dbCache-&gt;remove($key)</h3>

<p>移除一项缓存</p>

<h3>dbCache-&gt;exists($key)</h3>

<p>检查缓存是否存在</p>

<h3>dbCache-&gt;add($key, $value)</h3>

<p>增加一项缓存,如果缓存已存在,返回false</p>

<h3>dbCache-&gt;replace($key, $value)</h3>

<p>替换一项缓存,如果缓存 <strong>不</strong> 存在,返回false</p>

<h3>dbCache-&gt;increment($key, $offset = 1)</h3>

<p>增大一项缓存的值</p>

<h3>dbCache-&gt;decrement($key, $offset = 1)</h3>

<p>减小一项缓存的值</p>

<h3>dbCache-&gt;getMulti($keys)</h3>

<p>批量获取缓存的值</p>

<h3>dbCache-&gt;setMulti($values)</h3>

<p>批量设置缓存的值</p>
</body></html>

  </section>

<!-- fileCache
  ================================================== -->
  <section id="fileCache">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1>fileCache</h1>

<p>设置或获取文件缓存</p>

<h2>案例</h2>

<h3>设置和获取文件缓存</h3>

<pre><code class="php">// 设置缓存
$widget-&gt;fileCache('key', 'value');
// true

// 获取缓存
$widget-&gt;fileCache('key');
// value
</code></pre>

<h2>调用方式</h2>

<h3>选项</h3>

<p><em>无</em></p>

<h3>方法</h3>

<h4>fileCache ($key, $value)</h4>

<p>设置缓存的值<br><code>php<br>
$widget-&gt;fileCache('key', 'value');<br></code></p>

<h4>fileCache($key)</h4>

<p>获取指定名称的缓存<br><code>php<br>
$widget-&gt;fileCache('name');<br></code></p>

<h3>fileCache-&gt;set($key, $value)</h3>

<p>设置缓存的值</p>

<h3>fileCache-&gt;get($key)</h3>

<p>获取缓存的值</p>

<h3>fileCache-&gt;remove($key)</h3>

<p>移除一项缓存</p>

<h3>fileCache-&gt;exists($key)</h3>

<p>检查缓存是否存在</p>

<h3>fileCache-&gt;add($key, $value)</h3>

<p>增加一项缓存,如果缓存已存在,返回false</p>

<h3>fileCache-&gt;replace($key, $value)</h3>

<p>替换一项缓存,如果缓存 <strong>不</strong> 存在,返回false</p>

<h3>fileCache-&gt;increment($key, $offset = 1)</h3>

<p>增大一项缓存的值</p>

<h3>fileCache-&gt;decrement($key, $offset = 1)</h3>

<p>减小一项缓存的值</p>

<h3>fileCache-&gt;getMulti($keys)</h3>

<p>批量获取缓存的值</p>

<h3>fileCache-&gt;setMulti($values)</h3>

<p>批量设置缓存的值</p>
</body></html>

  </section>

<!-- memcache
  ================================================== -->
  <section id="memcache">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/memcache">memcache()</a></h1>

<p>{@inheritdoc}</p>

<h3>{@inheritdoc}</h3>

<pre><code class="php">void memcache($key, $value, $expire)
</code></pre>

<h5>参数</h5>

<p><em>无</em></p>
</body></html>

  </section>

<!-- memcached
  ================================================== -->
  <section id="memcached">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/memcached">memcached()</a></h1>

<p>{@inheritdoc}</p>

<h3>{@inheritdoc}</h3>

<pre><code class="php">void memcached($key, $value, $expire)
</code></pre>

<h5>参数</h5>

<p><em>无</em></p>
</body></html>

  </section>

<!-- redis
  ================================================== -->
  <section id="redis">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1><a href="http://twinh.github.io/widget/api/redis">redis()</a></h1>

<p>设置或获取一项Redis缓存</p>

<h5>目录</h5>

<ul>
<li>redis( $key, $value [ $expire ] )</li>
<li>redis( $key )</li>
</ul>
<h3>设置一项Redis缓存</h3>

<pre><code class="php">bool redis( $key, $value [ $expire ] )
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$key</strong> <code>string</code> 缓存的键名</li>
<li>
<strong>$value</strong> <code>mixed</code> 缓存的值,允许任意类型</li>
<li>
<strong>$expire</strong> <code>int</code> 缓存的有效期,默认为0秒,表示永不过期</li>
</ul>
<p>该调用方式相等于<code>$widget-&gt;redis-&gt;set($key, $value, $expire)</code></p>

<h5>代码范例</h5>

<p>设置键名为"key",值为"value"的缓存<br>
```php<br>
&lt;?php</p>

<p>$widget-&gt;redis('key', 'value');</p>

<p>echo $widget-&gt;redis('key');<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'value'
</code></pre>

<hr>
<h3>获取一项Redis缓存</h3>

<pre><code class="php">bool redis( $key )
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$key</strong> <code>string</code> 缓存的键名</li>
</ul>
<p>该调用方式相等于<code>$widget-&gt;redis-&gt;get($key)</code></p>

<h5>代码范例</h5>

<p>获取键名为"key"的缓存,并打印出来<br>
```php<br>
&lt;?php</p>

<p>$widget-&gt;redis('key', 'value');</p>

<p>echo $widget-&gt;redis('key');<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'value'
</code></pre>
</body></html>

  </section>

<!-- bicache
  ================================================== -->
  <section id="bicache">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/bicache">bicache()</a></h1>

<p>{@inheritdoc}</p>

<h3>{@inheritdoc}</h3>

<pre><code class="php">void bicache($key, $value, $expire)
</code></pre>

<h5>参数</h5>

<p><em>无</em></p>
</body></html>

  </section>

<!-- event
  ================================================== -->
  <section id="event">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1>Event</h1>

<p>绑定,触发和移除事件,并支持命名空间等特性.</p>

<h2>案例</h2>

<h3>绑定,触发和移除事件</h3>

<pre><code class="php">// 绑定名称为connect的事件
$widget-&gt;on('connect', function(){
    echo 'connected';
});

// 触发connect事件,将输出connected
$widget-&gt;trigger('connect');

// 移除connect事件
$widget-&gt;off('connect');

// 再次触发connect事件,没有任何输出
$widget-&gt;trigger('connect');
</code></pre>

<h2>调用方式</h2>

<h3>选项</h3>

<p><em>无</em></p>

<h3>方法</h3>

<h4>on($type, $fn, $priority = 0, $data = array())</h4>

<p>绑定指定类型的事件触发器</p>

<h5>参数</h5>

<table class="table table-bordered table-striped">
<thead><tr>
<th>名称</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr></thead>
<tbody>
<tr>
<td>$type</td>
<td>string</td>
<td>无</td>
<td>事件的类型</td>
</tr>
<tr>
<td>$fn</td>
<td>callback</td>
<td>无</td>
<td>事件触发器</td>
</tr>
<tr>
<td>$priority</td>
<td>int,string</td>
<td>0</td>
<td>事件触发器的优先级,越大表示优先级越高,默认是0</td>
</tr>
<tr>
<td>$data</td>
<td>array</td>
<td>array()</td>
<td>当事件触发器触发时,传递给事件对象的数据</td>
</tr>
</tbody>
</table>
<p>事件触发器的优先级既可以是数字,也可以是字符串.预定于的字符串有<code>low</code>, <code>normal</code>, <code>high</code>,它们分别代表的数值如下表所示:</p>

<table class="table table-bordered table-striped">
<thead><tr>
<th>值</th>
<th>数值</th>
</tr></thead>
<tbody>
<tr>
<td>low</td>
<td>-1000</td>
</tr>
<tr>
<td>normal</td>
<td>0</td>
</tr>
<tr>
<td>high</td>
<td>1000</td>
</tr>
</tbody>
</table>
<h4>off($type)</h4>

<p>移除指定类型的事件触发器</p>

<h5>参数</h5>

<table class="table table-bordered table-striped">
<thead><tr>
<th>名称</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>$type</td>
<td>string</td>
<td>无</td>
<td>事件的类型,可以包含命名空间,如"error.namespace",也可以只有命名空间,如".namespace"</td>
</tr></tbody>
</table>
<p><code>off</code>微件是事件管理器(<code>eventManager</code>)<code>remove</code>方法的别名</p>

<p>如果<code>$type</code>只是纯命名空间,如'.namespace',表示移除该命名空间下所有的事件触发器</p>

<h4>trigger($type, $params = array(), $widget = null)</h4>

<p>触发指定类型的事件</p>

<h5>参数</h5>

<table class="table table-bordered table-striped">
<thead><tr>
<th>名称</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr></thead>
<tbody>
<tr>
<td>$type</td>
<td>string,Widget\Event\EventInterface</td>
<td>无</td>
<td>事件的类型或是事件对象</td>
</tr>
<tr>
<td>$params</td>
<td>array</td>
<td>array()</td>
<td>传递给事件触发器的参数</td>
</tr>
<tr>
<td>$widget</td>
<td>Widget\WidgetInterface</td>
<td>null</td>
<td>微件对象</td>
</tr>
</tbody>
</table>
<p>第三个参数<code>$widget</code>为可选的微件对象,如果微件包含与事件名称相同的属性,那么,事件管理器将会把该属性<br>
作为一个事件触发器,在所有的触发器触发后才触发.</p>
</body></html>

  </section>

<!-- request
  ================================================== -->
  <section id="request">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1><a href="http://twinh.github.io/widget/api/request">request()</a></h1>

<p>获取一项HTTP请求参数($_REQUEST)的值</p>

<pre><code class="php">string|null request( $name [, $default ] )
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$name</strong> <code>string</code> 请求参数的名称</li>
<li>
<strong>$default</strong> <code>string</code> 当请求参数不存在时返回的值,默认是null</li>
</ul>
<p><strong>注意:</strong>通过<code>$widget-&gt;request($name)</code>取到的值是字符串或<code>$default</code>,如果需要获取原始值,可以通过<code>$widget-&gt;request-&gt;getRaw($name)</code>取得.</p>
</body></html>

  </section>

<!-- response
  ================================================== -->
  <section id="response">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1><a href="http://twinh.github.io/widget/api/response">response()</a></h1>

<p>发送HTTP响应头和响应内容</p>

<pre><code class="php">\Widget\Response response( $content [, $stateCode ] )
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$content</strong> <code>string</code> 响应的内容</li>
<li>
<strong>$stateCode</strong> <code>string</code> HTTP状态码,默认是<code>200</code>
</li>
</ul>
<h5>代码范例</h5>

<p>发送内容为"Hello World"的HTTP响应<br>
```php<br>
&lt;?php</p>

<p>$widget-&gt;response('Hello World');<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'Hello World'
</code></pre>

<h5>代码范例</h5>

<p>查看上面例子中HTTP响应的完整内容<br>
```php<br>
&lt;?php</p>

<p>echo (string)$widget-&gt;response;<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'HTTP/1.1 200 OK

Hello World'
</code></pre>
</body></html>

  </section>

<!-- validate
  ================================================== -->
  <section id="validate">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1><a href="http://twinh.github.io/widget/api/validate">validate()</a></h1>

<p>检查数组或对象中每一个元素是否能通过指定规则的验证</p>

<pre><code class="php">\Widget\Validator validate( $options )
</code></pre>

<h5>参数</h5>

<ul>
<li>$options 验证器的配置选项

<ul>
<li> <strong>data</strong> <code>array|object</code> 待验证的数据,可以是数组或对象</li>
<li> <strong>rules</strong> <code>array</code> 验证规则数组</li>
<li> <strong>messages</strong> <code>array</code> 验证错误时的提示信息</li>
<li> <strong>names</strong> <code>array</code> 数据项名称的数组,用于错误信息提示</li>
<li> <strong>ruleValid</strong> <code>callback</code> 规则验证通过时调用的回调函数</li>
<li> <strong>ruleInvalid</strong> <code>callback</code> 规则验证不通过时调用的回调函数</li>
<li> <strong>fieldValid</strong> <code>callback</code> 数据项验证通过时调用的回调函数</li>
<li> <strong>fieldInvalid</strong> <code>callback</code> 数据项验证不通过时调用的回调函数</li>
<li> <strong>success</strong> <code>callback</code> 验证器验证通过(所有验证规则都通过)时调用的回调函数</li>
<li> <strong>failure</strong> <code>callback</code> 验证器验证不通过(任意验证规则不通过)时调用的回调函数</li>
<li> <strong>breakRule</strong> <code>bool</code> 是否当任意一项规则验证不通过时就中断验证流程,默认为false</li>
<li> <strong>breakField</strong> <code>bool</code> 是否当任意一项数据验证不通过时就中断验证流程,默认为false</li>
<li> <strong>skip</strong> <code>bool</code> 是否当任意一项数据中的一项规则不通过时,就跳转到下一项数据的验证流程,默认是false,启用后,每项数据最多会有一个未通过的验证规则</li>
</ul>
</li>
</ul>
<p>Widget验证器是参考<a href="http://bassistance.de/jquery-plugins/jquery-plugin-validation/">jQuery Validation</a><br>
开发的数据验证器,她与<code>jQuery Validation</code>有着很多相似的地方,所以如果你使用过<br><code>jQuery Validation</code>,使用Widget验证器将非常容易上手.</p>

<h5>参数详细说明</h5>

<h5>data</h5>

<p>待验证的数据,可以是数组或对象</p>

<p>验证数据的取值的顺序如下(与<code>attr</code>微件一致)</p>

<ol>
<li>如果<code>$data</code>是数组或<code>\ArrayAccess</code>的实例化对象,检查并返回<code>$data[$key]</code>的值</li>
<li>如果<code>$data</code>是对象,检查属性<code>$key</code>是否存在,存在则返回<code>$data-&gt;$key</code>的值</li>
<li>如果<code>$data</code>是对象且方法<code>get. $key</code>存在,返回<code>$data-&gt;{'get' . $key}</code>
</li>
<li>如果以上均不存在,返回null</li>
</ol>
<p><strong>代码范例</strong></p>

<pre><code class="php">class User
{
    public function getName()
    {
        return 'twin';
    }

    public function getEmail()
    {
        return 'test@test.com';
    }
}

// 以数组为验证数据
$widget-&gt;validate(array(
    'data' =&gt; array(
        'name' =&gt; 'twin',
        'email' =&gt; 'test@test.com'
    )
));

// 以数组对象为验证数据
$widget-&gt;validate(array(
    'data' =&gt; new \ArrayObject(array(
        'name' =&gt; 'twin',
        'email' =&gt; 'test@test.com'
    ))
));

// 以对象为验证数据
$widget-&gt;validate(array(
    'data' =&gt; new User
));
</code></pre>

<h5>rules</h5>

<p>验证规则数组.键名是验证的数据项名称,值是验证规则.验证规则可以字符串,表示一项验证规则,也可以是数组<br>
,表示多项验证规则.</p>

<p><strong>注意:</strong>验证规则数组有一点与<code>jQuery Validation</code>不同,默认情况下,<code>jQuery Validation</code>的所有<br>
数据项都是 <strong>可选</strong> 的,但是Widget验证器的所有数据项都是 <strong>必选</strong> 的.如果某一个数据项是选填的,只需增<br>
加<code>required =&gt; false</code>的验证规则</p>

<p>在验证过程中,验证器会根据验证规则的名称,检查对应的规则验证器是否存在,如<code>email</code>规则将被转换为<br><code>\Widget\Validator\Email</code>类,如果类不存在,将抛出<code>\Widget\Exception\InvalidArgumentException</code><br>
异常提醒开发人员规则不存在.如果类存在,将初始化该类.然后,验证器组织验证规则提供的参数,供规则验证器验证.</p>

<pre><code class="php">$widget-&gt;validate(array(
    'rules' =&gt; array(
        // 简单规则,将会被转换为 array('required' =&gt; true)
        'name' =&gt; 'required',
        // 复合规则
        'email' =&gt; array(
            'required' =&gt; false, // 设置为false表示email是选填
            'email' =&gt; true,
            'length' =&gt; array(3, 256),
        ),
        // 完整规则
        'avatar' =&gt; array(
            'image' =&gt; array(
                'maxWidth' =&gt; 200,
                'maxHeight' =&gt; 200
            )
        ),
        // 允许的验证器格式
        '数据项名称' =&gt; array(
            '验证器名称1',
            '验证器名称2' =&gt; array('验证的选项1', '验证的选项2'), // 参数将传递给验证器的__invoke方法
            '验证器名称3' =&gt; array( // 参数将传递给验证器的setOption方法
                '验证器选项名称1' =&gt; '验证器选项值1',
                '验证器选项名称2' =&gt; '验证器选项值2',
            )
        ) 
    )
));
</code></pre>

<h4>messages</h4>

<p>验证错误时的提示信息.提示信息的格式与验证规则类似.</p>

<p><strong>代码范例</strong></p>

<pre><code class="php">$widget-&gt;validate(array(
    'rules' =&gt; array(
        'name' =&gt; 'required',
        'email' =&gt; array(
            'required' =&gt; true,
            'email' =&gt; true
        ),
        'avatar' =&gt; array(
            'image' =&gt; array(
                'maxWidth' =&gt; 200,
                'maxHeight' =&gt; 200
            )
        )
    ),
    'messages' =&gt; array(
        // 简单信息
        'name' =&gt; '请输入您的用户名',
        // 复合信息
        'email' =&gt; array(
            'required' =&gt; '请输入邮箱地址',
            'email' =&gt; '您输入的邮箱格式不正确'
        ),
        // 完整信息
        'avatar' =&gt; array(
            'image' =&gt; array(
                'widthTooBig' =&gt; '您的头像宽度不能超过200px',
                'heightTooBig' =&gt; '您的头像高度不能超过200px'
            )
        ),
        // 信息的格式
        '数据项名称1' =&gt; '数据项错误信息1',
        '数据项名称2' =&gt; array(
            '验证器名称1' =&gt; '验证器错误信息1',
            '验证器名称2' =&gt; '验证器错误信息2'
        ),
        '数据项名称3' =&gt; array(
            '验证器名称3' =&gt; array(
                '验证错误信息的名称1' =&gt; '验证错误信息1'
                '验证错误信息的名称2' =&gt; '验证错误信息2'
            )
        ),
    )
));
</code></pre>

<h5>names</h5>

<p>数据项名称的数组,用于错误信息提示.数组的键名是验证数据项的值,数值的值是验证数据项的名称.如</p>

<p><strong>注意:</strong>如果未提供数据项名称,错误信息将以<code>该项</code>作为验证数据项的名称,完整的错误信息例如<code>该项不能为空</code></p>

<p><strong>代码范例</strong><br>
```php<br>
$widget-&gt;validate(array(<br>
    'rules' =&gt; array(<br>
        'name' =&gt; 'required',<br>
        'email' =&gt; array(<br>
            'required' =&gt; true,<br>
            'email' =&gt; true<br>
        ),<br>
        'avatar' =&gt; array(<br>
            'image' =&gt; array(<br>
                'maxWidth' =&gt; 200,<br>
                'maxHeight' =&gt; 200<br>
            )<br>
        )<br>
    ),<br>
    // 指定验证数据项的名称<br>
    'names' =&gt; array(<br>
        'name' =&gt; '用户名',<br>
        'email' =&gt; '邮箱',<br>
        'avatar' =&gt; '头像'<br>
    )<br>
));</p>

<p>// 输出信息类似:<br>
// 用户名不能为空<br>
// 邮箱不能为空<br>
// 头像宽度不能超过200px<br>
```</p>

<h5>ruleValid</h5>

<p>当任意一条规则验证通过时,验证器就会触发<code>ruleValid</code>事件.</p>

<p><strong>参数</strong></p>

<pre><code class="php">ruleValid( $event, $widget, $rule, $field, $validator )
</code></pre>

<ul>
<li>$event <code>Widget\Event\Event</code> 事件对象</li>
<li>$widget <code>Widget\Widget</code> 微件管理器</li>
<li>$rule <code>string</code> 通过的规则名称</li>
<li>$field <code>string</code> 当前验证的数据项名称</li>
<li>$validator <code>Widget\Validator</code> 验证器对象</li>
</ul>
<p>如果<code>ruleValid</code>事件返回false,验证器将直接中断后续所有验证流程,直接返回验证结果.</p>

<p><strong>代码范例</strong></p>

<pre><code class="php">$widget-&gt;validate(array(
    'data' =&gt; array(
        'name' =&gt; 'twin'
    ),
    'rules' =&gt; array(
        'name' =&gt; 'required'
    ),
    'ruleValid' =&gt; function($event, $widget, $rule, $field, $validator) {
        echo $rule;
        echo $field;
        echo 'Yes';
    }
));
</code></pre>

<p><strong>运行结果</strong></p>

<pre><code class="php">'required'
'name'
'Yes'
</code></pre>

<h5>ruleInvalid</h5>

<p>当任意一条规则验证 <strong>不</strong> 通过时,验证器就会触发<code>ruleInvalid</code>事件.</p>

<p><strong>参数</strong></p>

<pre><code class="php">ruleInvalid( $event, $widget, $rule, $field, $validator )
</code></pre>

<ul>
<li>$event <code>Widget\Event\Event</code> 事件对象</li>
<li>$widget <code>Widget\Widget</code> 微件管理器</li>
<li>$rule <code>string</code> 未通过的规则名称</li>
<li>$field <code>string</code> 当前验证的数据项名称</li>
<li>$validator <code>Widget\Validator</code> 验证器对象</li>
</ul>
<p><code>ruleInvalid</code>与<code>ruleValid</code>的行为一致.<br>
同样的,如果<code>ruleInvalid</code>事件返回false,验证器将直接中断后续所有验证流程,直接返回验证结果.</p>

<p><strong>代码范例</strong></p>

<pre><code class="php">$widget-&gt;validate(array(
    'data' =&gt; array(
        'name' =&gt; null
    ),
    'rules' =&gt; array(
        'name' =&gt; 'required'
    ),
    'ruleInvalid' =&gt; function($event, $widget, $rule, $field, $validator) {
        echo $rule;
        echo $field;
        echo 'No';
    }
));
</code></pre>

<p><strong>运行结果</strong></p>

<pre><code class="php">'required'
'name'
'No'
</code></pre>

<h5>fieldValid</h5>

<p>当任意数据项验证通过时,验证器就会触发<code>fieldValid</code>事件.</p>

<p><strong>参数</strong></p>

<pre><code class="php">fieldValid ( $event, $widget, $field, $validator )
</code></pre>

<ul>
<li>$event <code>Widget\Event\Event</code> 事件对象</li>
<li>$widget <code>Widget\Widget</code> 微件管理器</li>
<li>$field <code>string</code> 当前验证的数据项名称</li>
<li>$validator <code>Widget\Validator</code> 验证器对象</li>
</ul>
<p>如果<code>fieldValid</code>事件返回false,验证器将直接中断后续所有验证流程,直接返回验证结果.</p>

<p><strong>代码范例</strong></p>

<pre><code class="php">$widget-&gt;validate(array(
    'data' =&gt; array(
        'name' =&gt; 'twin'
    ),
    'rules' =&gt; array(
        'name' =&gt; 'required'
    ),
    'fieldValid' =&gt; function($event, $widget, $field, $validator) {
        echo $field;
        echo 'Yes';
    }
));
</code></pre>

<p><strong>运行结果</strong></p>

<pre><code class="php">'name'
'Yes'
</code></pre>

<h5>fieldInvalid</h5>

<p>当任意数据项验证 <strong>不</strong> 通过时,验证器就会触发<code>fieldInvalid</code>事件.</p>

<p><strong>参数</strong></p>

<pre><code class="php">fieldInvalid ( $event, $widget, $field, $validator )
</code></pre>

<ul>
<li>$event <code>Widge\Event\Event</code> 事件对象</li>
<li>$widget <code>Widget\Widget</code> 微件管理器</li>
<li>$field <code>string</code> 当前验证的数据项名称</li>
<li>$validator <code>Widget\Validator</code> 验证器对象</li>
</ul>
<p>如果<code>fieldInvalid</code>事件返回false,验证器将直接中断后续所有验证流程,直接返回验证结果.</p>

<p><strong>代码范例</strong></p>

<pre><code class="php">$widget-&gt;validate(array(
    'data' =&gt; array(
        'name' =&gt; null
    ),
    'rules' =&gt; array(
        'name' =&gt; 'required'
    ),
    'fieldValid' =&gt; function($event, $widget, $field, $validator) {
        echo $field;
        echo 'No';
    }
));
</code></pre>

<p><strong>运行结果</strong></p>

<pre><code class="php">'name'
'No'
</code></pre>

<h5>success</h5>

<p>验证结束时,如果最终验证结果为通过,验证器就触发<code>success</code>事件.</p>

<pre><code class="php">success ( $event, $widget, $validator )
</code></pre>

<ul>
<li>$event <code>Widge\Event\Event</code> 事件对象</li>
<li>$widget <code>Widget\Widget</code> 微件管理器</li>
<li>$validator <code>Widget\Validator</code> 验证器对象</li>
</ul>
<p><strong>代码范例</strong></p>

<pre><code class="php">$widget-&gt;validate(array(
    'data' =&gt; array(
        'name' =&gt; 'twin'
    ),
    'rules' =&gt; array(
        'name' =&gt; 'required'
    ),
    'success' =&gt; function($event, $widget, $validator) {
        echo 'Yes';
    }
));
</code></pre>

<p><strong>运行结果</strong></p>

<pre><code class="php">'Yes'
</code></pre>

<h5>failure</h5>

<p>验证结束时,如果最终验证结果为 <strong>不</strong> 通过,验证器就触发<code>failure</code>事件.</p>

<pre><code class="php">failure ( $event, $widget, $validator )
</code></pre>

<ul>
<li>$event <code>Widge\Event\Event</code> 事件对象</li>
<li>$widget <code>Widget\Widget</code> 微件管理器</li>
<li>$validator <code>Widget\Validator</code> 验证器对象</li>
</ul>
<p><strong>代码范例</strong></p>

<pre><code class="php">$widget-&gt;validate(array(
    'data' =&gt; array(
        'name' =&gt; null
    ),
    'rules' =&gt; array(
        'name' =&gt; 'required'
    ),
    'failure' =&gt; function($event, $widget, $validator) {
        echo 'No';
    }
));
</code></pre>

<p><strong>运行结果</strong></p>

<pre><code class="php">'No'
</code></pre>

<h5>breakRule</h5>

<p>默认为不启用.启用该选项后,当任意一项规则验证不通过时就中断验证流程,直接返回验证结果(false)</p>

<h5>breakField</h5>

<p>默认为不启用.启用该选项后,当任意一项数据验证不通过时就中断验证流程,直接返回验证结果(false)</p>

<h5>skip</h5>

<p>默认是不启用.启用该选项后,当任意一项数据中的一项规则不通过时,就跳转到下一项数据的验证流程,因此,每项数据最多会有一个未通过的验证规则</p>

<hr>
<h5>代码范例</h5>

<p>检查数据是否符合指定的验证规则<br>
```php<br>
&lt;?php</p>

<p>$validator = $widget-&gt;validate(array(<br>
    'data' =&gt; array(<br>
        'username' =&gt; 'tw',<br>
        'email' =&gt; 'invalid',<br>
    ),<br>
    'rules' =&gt; array(<br>
        'username' =&gt; array(<br>
            'minLength' =&gt; 3,<br>
            'alnum' =&gt; true,<br>
        ),<br>
        'email' =&gt; array(<br>
            'email' =&gt; true<br>
        )<br>
    ),<br>
    'names' =&gt; array(<br>
        'username' =&gt; '用户名',<br>
        'email' =&gt; '邮箱'<br>
    ),<br>
    'messages' =&gt; array(<br>
        'username' =&gt; array(<br>
            'minLength' =&gt; '%name%的长度必须大于3',<br>
            'alnum' =&gt; '%name%只能由字母和数字组成'<br>
        ),<br>
        'email' =&gt; '%name%格式不正确'<br>
    )<br>
));</p>

<p>// 检查是否通过验证<br>
if ($validator-&gt;isValid()) {<br>
    echo 'Yes';<br>
} else {<br>
    echo 'No';<br>
}</p>

<p>// 输出详细的错误信息<br>
print_r($validator-&gt;getDetailMessages());</p>

<p>// 输出简练的错误信息<br>
print_r($validator-&gt;getSummaryMessages());</p>

<p>// 输出合并的错误信息<br>
print_r($validator-&gt;getJoinedMessage());</p>

<pre><code>##### 运行结果
```php
'NoArray
(
    [username] =&gt; Array
        (
            [minLength] =&gt; Array
                (
                    [tooShort] =&gt; 用户名的长度必须大于3
                )

        )

    [email] =&gt; Array
        (
            [email] =&gt; Array
                (
                    [format] =&gt; 邮箱格式不正确
                )

        )

)
Array
(
    [username] =&gt; Array
        (
            [0] =&gt; 用户名的长度必须大于3
        )

    [email] =&gt; Array
        (
            [0] =&gt; 邮箱格式不正确
        )

)
用户名的长度必须大于3
邮箱格式不正确'
</code></pre>
</body></html>

  </section>

<!-- view
  ================================================== -->
  <section id="view">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1><a href="http://twinh.github.io/widget/api/view">view()</a></h1>

<p>渲染指定名称的模板或获取视图微件对象</p>

<h5>目录</h5>

<ul>
<li>view( [$name [, $vars ] ] )</li>
<li>view()</li>
</ul>
<pre><code class="php">string view( [$name [, $vars ] ] )
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$name</strong> <code>string</code> 模板文件的路径</li>
<li>
<strong>$vars</strong> <code>array</code> 附加到模板的变量</li>
</ul>
<p>在下面的例子中,View微件将先渲染<code>template.php</code>文件,再把渲染结果存储到变量<code>$content</code>中,再渲染layout.php文件,并输出运行结果</p>

<p>文件<code>template.php</code><br><code>php<br>
&lt;?php $this-&gt;layout('layout.php') ?&gt;<br>
Template Content<br></code></p>

<p>文件<code>layout.php</code><br><code>php<br>
Layout Header<br>
&lt;?= $content ?&gt;<br>
Layout Footer<br></code></p>

<h5>代码范例</h5>

<p>渲染带布局的模板<code>template.php</code><br>
```php<br>
&lt;?php</p>

<p>$widget-&gt;view-&gt;setDirs(__DIR__ . '/fixtures');</p>

<p>echo $widget-&gt;view-&gt;render('template.php');<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'Layout Header
Template Content
Layout Footer'
</code></pre>

<hr>
<h3>获取视图微件对象</h3>

<pre><code class="php">\Widget\View view()
</code></pre>

<h5>参数</h5>

<p><em>无</em></p>
</body></html>

  </section>

<!-- escape
  ================================================== -->
  <section id="escape">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1><a href="http://twinh.github.io/widget/api/escape">escape()</a></h1>

<p>转义字符串中的特殊字符,以便安全的输出到网页中,支持HTML,JS,CSS,HTML属性和URL的转义</p>

<pre><code class="php">bool escape($input [, $type ] )
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$input</strong> <code>string</code> 待转义的字符串</li>
<li>
<strong>$type</strong> <code>string</code> 转义的类型,支持html,js,css,attr和url5种转义方式,默认是html</li>
</ul>
<p>Escape微件是基于<a href="https://github.com/zendframework/zf2/tree/master/library/Zend/Escaper">Zend\Escaper</a>组件的字符串安全转义器.Escape微件的用法与Zend\Escaper基本一致.关于Zend\Escaper的文档可以查看这里<a href="http://framework.zend.com/manual/2.1/en/modules/zend.escaper.introduction.html">http://framework.zend.com/manual/2.1/en/modules/zend.escaper.introduction.html</a></p>

<p>转义HTML字符串也可以直接调用<code>$widget-&gt;escape-&gt;html($string)</code></p>

<p>转义Javascript字符串也可以直接调用<code>$widget-&gt;escape-&gt;js($string)</code></p>

<p>转义CSS字符串也可以直接调用<code>$widget-&gt;escape-&gt;css($string)</code></p>

<p>转义HTML属性字符串也可以直接调用<code>$widget-&gt;escape-&gt;attr($string)</code></p>

<p>转义URL字符串也可以直接调用<code>$widget-&gt;escape-&gt;url($string)</code></p>

<h5>代码范例</h5>

<p>转义HTML字符串<br>
```php<br>
&lt;?php</p>

<p>echo $widget-&gt;escape('alert("xss")');<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'&amp;lt;script&amp;gt;alert(&amp;quot;xss&amp;quot;)&amp;lt;/script&amp;gt;'
</code></pre>

<h5>代码范例</h5>

<p>转义Javascript字符串<br>
```php<br>
&lt;?php</p>

<p>echo $widget-&gt;escape-&gt;js('bar"; alert("Meow!"); var xss="true');<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'bar\x26quot\x3B\x3B\x20alert\x28\x26quot\x3BMeow\x21\x26quot\x3B\x29\x3B\x20var\x20xss\x3D\x26quot\x3Btrue'
</code></pre>

<h5>代码范例</h5>

<p>转义CSS字符串<br>
```php<br>
&lt;?php</p>

<p>echo $widget-&gt;escape-&gt;css("background-image: url('<a href="http://example.com/foo.jpg">http://example.com/foo.jpg</a>?alert(1)');");<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'background\2D image\3A \20 url\28 \27 http\3A \2F \2F example\2E com\2F foo\2E jpg\3F \3C \2F style\3E \3C script\3E alert\28 1\29 \3C \2F script\3E \27 \29 \3B '
</code></pre>

<h5>代码范例</h5>

<p>转义HTML属性字符串<br>
```php<br>
&lt;?php</p>

<p>echo 'escape-&gt;attr("faketitle onmouseover=alert(/xss/);");<br>
echo '&gt;hi';<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'&lt;span title=faketitle&amp;#x20;onmouseover&amp;#x3D;alert&amp;#x28;&amp;#x2F;xss&amp;#x2F;&amp;#x29;&amp;#x3B;&gt;hi&lt;/span&gt;'
</code></pre>

<h5>代码范例</h5>

<p>转义URL字符串<br>
```php<br>
&lt;?php</p>

<p>echo 'escape-&gt;url("onmouseover= \"alert('zf2')");<br>
echo '"&gt;Click here!';<br>
```</p>

<h5>运行结果</h5>

<pre><code class="php">'&lt;a href="http://example.com/?name=onmouseover%3D%20%22alert%28%27zf2%27%29"&gt;Click here!&lt;/a&gt;'
</code></pre>
</body></html>

  </section>

<!-- smarty
  ================================================== -->
  <section id="smarty">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/smarty">smarty()</a></h1>

<p>Returns \Smarty object or render a template</p>

<h3>Returns \Smarty object or render a template</h3>

<pre><code class="php">\Smarty|string smarty($name, $vars)
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$name</strong> <code>string</code> The name of template</li>
<li>
<strong>$vars</strong> <code>array</code> The variables pass to template</li>
</ul>
<p>if NO parameter provied, the invoke method will return the \Smarty<br>
object otherwise, call the render method</p>
</body></html>

  </section>

<!-- twig
  ================================================== -->
  <section id="twig">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/twig">twig()</a></h1>

<p>Returns \Twig_Environment object or render a template</p>

<h3>Returns \Twig_Environment object or render a template</h3>

<pre><code class="php">\Twig_Environment|string twig($name, $vars)
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$name</strong> <code>string</code> The name of template</li>
<li>
<strong>$vars</strong> <code>array</code> The variables pass to template</li>
</ul>
<p>if NO parameter provied, the invoke method will return the<br>
\Twig_Environment object. otherwise, call the render method</p>
</body></html>

  </section>

<!-- instance
  ================================================== -->
  <section id="instance">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/instance">instance()</a></h1>

<p>Instance a class</p>

<h3>Instance a class</h3>

<pre><code class="php">false|object instance($class, $args)
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$class</strong> <code>string</code> the name of class</li>
<li>
<strong>$args</strong> <code>array</code> the parameters to be passed to the class constructor as an array.</li>
</ul>
</body></html>

  </section>

<!-- logger
  ================================================== -->
  <section id="logger">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/logger">logger()</a></h1>

<p>Logs with an arbitrary level</p>

<h3>Logs with an arbitrary level</h3>

<pre><code class="php">bool logger($level, $message, $context)
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$level</strong> <code>mixed</code> </li>
<li>
<strong>$message</strong> <code>string</code> </li>
<li>
<strong>$context</strong> <code>array</code> </li>
</ul>
</body></html>

  </section>

<!-- pinyin
  ================================================== -->
  <section id="pinyin">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<pre><code>该微件文档还在紧急编写中,敬请期待!
</code></pre>

<h1><a href="http://twinh.github.io/widget/api/pinyin">pinyin()</a></h1>

<p>Converts chinese words to phonetic alphabets</p>

<h3>Converts chinese words to phonetic alphabets</h3>

<pre><code class="php">string pinyin($word)
</code></pre>

<h5>参数</h5>

<ul>
<li>
<strong>$word</strong> <code>string</code> </li>
</ul>
</body></html>

  </section>

</div><!-- /.container -->

<a href="#welcome" class="bs-docs-top">
  Back to top
</a>


    <!-- Main docs footer (social buttons, copyright, etc). -->
    <!-- Footer
================================================== -->
<footer class="bs-docs-footer">
  <div class="bs-docs-container">

    <div class="bs-docs-social">
      <ul class="bs-docs-social-buttons">
        <li>
          <iframe src="http://ghbtns.com/github-btn.html?user=twinh&repo=widget&type=watch"
            allowtransparency="true" frameborder="0" scrolling="0" width="53" height="20"></iframe>
        <li>
          <iframe src="http://ghbtns.com/github-btn.html?user=twinh&type=follow"
            allowtransparency="true" frameborder="0" scrolling="0" width="132" height="20"></iframe>
        </li>
      </ul>
    </div>

    <p>页面主题来自<a href="https://github.com/twitter/bootstrap">Bootstrap 3.0</a>,感谢Bootstrap 3.0!</p>
    <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
    <ul class="footer-links">
      <li><a href="https://github.com/twinh/widget/issues?state=open">Issues</a></li>
      <li class="muted">&middot;</li>
      <li><a href="https://github.com/twinh/widget/">Github</a></li>
    </ul>
  </div>
</footer>

    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"></script>
<script src="./assets/js/bootstrap-transition.js"></script>
<script src="./assets/js/bootstrap-alert.js"></script>
<script src="./assets/js/bootstrap-modal.js"></script>
<script src="./assets/js/bootstrap-dropdown.js"></script>
<script src="./assets/js/bootstrap-scrollspy.js"></script>
<script src="./assets/js/bootstrap-tab.js"></script>
<script src="./assets/js/bootstrap-tooltip.js"></script>
<script src="./assets/js/bootstrap-popover.js"></script>
<script src="./assets/js/bootstrap-button.js"></script>
<script src="./assets/js/bootstrap-collapse.js"></script>
<script src="./assets/js/bootstrap-carousel.js"></script>
<script src="./assets/js/bootstrap-typeahead.js"></script>
<script src="./assets/js/bootstrap-affix.js"></script>

<script src="./assets/js/holder/holder.js"></script>

<script src="./assets/js/application.js"></script>
<script src="./assets/highlight.js/highlight.pack.js"></script>
<script>
hljs.tabReplace = '    '; //4 spaces
hljs.initHighlightingOnLoad();
jQuery(function(){
  $('section h1').wrap('<div class="page-header"></div>')
})
</script>

<!-- Analytics
================================================== -->
<script>
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f0dc9fef5a1f55508000013');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

  </body>
</html>