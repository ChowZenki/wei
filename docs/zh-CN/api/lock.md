Lock
====

锁服务,用于对请求,资源进行加锁,防止重复操作

案例
----

### 对请求进行加锁,防止重复操作

在一些长时间的请求,或者一次重要的请求(如领取礼包,增加积分),可以通过加锁防止重复提交,导致数据重复.

```php
if (!wei()->lock('longTimeJob')) {
    echo '您的请求还在执行中,请稍后再试';
    return;
}

// 执行长时间的任务
sleep(5);
echo '操作成功';
```

> ### 注意
>
> 在请求结束后,所有的锁都会被自动释放

### 常用场景

* 限制用户只能领取一个礼包
* 对用户增加或减少积分
* 限制用户只能购买一件商品

调用方式
--------

### 选项

无

### 方法

#### lock($key)
对指定的键名加锁

返回 `bool` 成功时返回`true`,失败返回`false`

#### lock->release($key)
对指定的键名解锁

返回 `bool` 键名存在时返回`true`,不存在时返回`false`

#### lock->releaseAll()
释放当前请求所有的锁